(this["webpackJsonpcream-play-h5"]=this["webpackJsonpcream-play-h5"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);n(8);var a=n(0),o=n.n(a),r=n(27),c=n.n(r),i=n(11),u=n(20),l=n(55),s=n(2),d="ADD",m="MINUS",p={num:100};var f="LOAD_USER_DATA",h="CLEAR_USER_DATA",g="LOAD_CURRENT_USER_DATA",b="CLEAR_CURRENT_USER_DATA",v={currentUser:Object(s.a)({},{login:!1,permissions:[],authority:[],role:[],token:null,username:null,userId:null})};n(39);var E=n(32),y={save:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},remove:function(e){return window.localStorage.removeItem(e)}},O="LOAD_SETTING_DATA",k="CLEAR_SETTING_DATA",j={locale:y.get("locale")||"zh-CN",theme:"light"};var w=Object(u.c)({counter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(s.a)(Object(s.a)({},e),{},{num:e.num+1});case m:return Object(s.a)(Object(s.a)({},e),{},{num:e.num-1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(s.a)(Object(s.a)({},e),t.payload);case h:return Object(s.a)({},v);case g:return Object(s.a)(Object(s.a)({},v),{},{currentUser:Object(s.a)(Object(s.a)({},e.currentUser),t.payload)});case b:return Object(s.a)(Object(s.a)({},v),{},{currentUser:Object(s.a)({},v.currentUser)});default:return e}},setting:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(s.a)(Object(s.a)({},e),t.payload);case k:return Object(s.a)({},j);default:return e}}}),T="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):u.d,N=[l.a],_=T(u.a.apply(void 0,N));var x=n(17),S=n(104),A={"en-US":{"navBar.lang":"Languages","layout.user.link.help":"Help","layout.user.link.privacy":"Privacy","layout.user.link.terms":"Terms","app.preview.down.block":"Download this page to your local project","app.welcome.link.fetch-blocks":"Get all block","app.welcome.link.block-list":"Quickly build standard, pages based on `block` development"},"zh-CN":{"navBar.lang":"\u8bed\u8a00","layout.user.link.help":"\u5e2e\u52a9","layout.user.link.privacy":"\u9690\u79c1","layout.user.link.terms":"\u6761\u6b3e","app.preview.down.block":"\u4e0b\u8f7d\u6b64\u9875\u9762\u5230\u672c\u5730\u9879\u76ee","app.welcome.link.fetch-blocks":"\u83b7\u53d6\u5168\u90e8\u533a\u5757","app.welcome.link.block-list":"\u57fa\u4e8e block \u5f00\u53d1\uff0c\u5feb\u901f\u6784\u5efa\u6807\u51c6\u9875\u9762"},"zh-TW":{"navBar.lang":"\u8a9e\u8a00","layout.user.link.help":"\u5e6b\u52a9","layout.user.link.privacy":"\u96b1\u79c1","layout.user.link.terms":"\u689d\u6b3e","app.preview.down.block":"\u4e0b\u8f09\u6b64\u9801\u9762\u5230\u672c\u5730\u9805\u76ee"}};var C=function(e){var t=e.children,n=(Object(i.c)((function(e){return e.setting}))||{}).locale,r=Object(a.useState)(A["zh-CN"]),c=Object(x.a)(r,2),u=c[0],l=c[1];return Object(a.useEffect)((function(){l(Object(s.a)(Object(s.a)({},A["zh-CN"]),A[n]))}),[n]),o.a.createElement(S.a,{messages:u,locale:n,key:n,defaultLocale:"zh-CN"},t)},q=n(57),U=n(6),R=n(29),D=n(26),z=n(31),L=n(58),I=n(41),K=n.n(I),M=n(59),P="token",H="refreshToken",B={TOKEN:P,REFRESH_TOKEN:H,HEADER_TOKEN:"Token",saveToken:function(e,t){var n=P;e===H&&(n=H),y.save(n,t)},getToken:function(e){var t=P;e===H&&(t=H),y.get(t);var n=y.get(t);return null===n?"":n},removeToken:function(e){var t=P;e===H&&(t=H),y.remove(t)},saveSession:function(e,t){e&&this.saveToken(this.TOKEN,e),t&&this.saveToken(this.REFRESH_TOKEN,t)},clearSession:function(){this.removeToken(this.TOKEN),this.removeToken(this.REFRESH_TOKEN)},continueSession:function(){return Object(M.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},F={200:"\u670d\u52a1\u5668\u6210\u529f\u8fd4\u56de\u8bf7\u6c42\u7684\u6570\u636e\u3002",201:"\u65b0\u5efa\u6216\u4fee\u6539\u6570\u636e\u6210\u529f\u3002",202:"\u4e00\u4e2a\u8bf7\u6c42\u5df2\u7ecf\u8fdb\u5165\u540e\u53f0\u6392\u961f\uff08\u5f02\u6b65\u4efb\u52a1\uff09\u3002",204:"\u5220\u9664\u6570\u636e\u6210\u529f\u3002",400:"\u53d1\u51fa\u7684\u8bf7\u6c42\u6709\u9519\u8bef\uff0c\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u65b0\u5efa\u6216\u4fee\u6539\u6570\u636e\u7684\u64cd\u4f5c\u3002",401:"\u7528\u6237\u6ca1\u6709\u6743\u9650\uff08\u4ee4\u724c\u3001\u7528\u6237\u540d\u3001\u5bc6\u7801\u9519\u8bef\uff09\u3002",403:"\u7528\u6237\u5f97\u5230\u6388\u6743\uff0c\u4f46\u662f\u8bbf\u95ee\u662f\u88ab\u7981\u6b62\u7684\u3002",404:"\u53d1\u51fa\u7684\u8bf7\u6c42\u9488\u5bf9\u7684\u662f\u4e0d\u5b58\u5728\u7684\u8bb0\u5f55\uff0c\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u64cd\u4f5c\u3002",406:"\u8bf7\u6c42\u7684\u683c\u5f0f\u4e0d\u53ef\u5f97\u3002",410:"\u8bf7\u6c42\u7684\u8d44\u6e90\u88ab\u6c38\u4e45\u5220\u9664\uff0c\u4e14\u4e0d\u4f1a\u518d\u5f97\u5230\u7684\u3002",422:"\u5f53\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u65f6\uff0c\u53d1\u751f\u4e00\u4e2a\u9a8c\u8bc1\u9519\u8bef\u3002",500:"\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u3002",502:"\u7f51\u5173\u9519\u8bef\u3002",503:"\u670d\u52a1\u4e0d\u53ef\u7528\uff0c\u670d\u52a1\u5668\u6682\u65f6\u8fc7\u8f7d\u6216\u7ef4\u62a4\u3002",504:"\u7f51\u5173\u8d85\u65f6\u3002"},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=B.getToken();return Object(s.a)(Object(s.a)({},e),{},Object(z.a)({},B.HEADER_TOKEN,t))},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=void 0===t?"":t,a=e.method,o=void 0===a?"get":a,r=e.data,c=e.params,i=e.headers,u=void 0===i?{}:i,l=Object(D.a)(e,["url","method","data","params","headers"]),d=n;try{var m="";if(d.match(/[a-zA-z]+:\/\/[^/]*/)){var p=d.match(/[a-zA-z]+:\/\/[^/]*/),f=Object(x.a)(p,1);m=f[0],d=n.slice(m.length)}d=m+(d=Object(E.a)(d,{encode:encodeURIComponent})(c))}catch(b){console.error(b.message)}var h=J(u),g=Object(s.a)(Object(s.a)({},l),{},{method:o,headers:h,data:r});return"get"===o&&(g.params=r,delete g.data),Object(s.a)({url:d},g)},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=V(e);return L(t).then((function(e){var t=e.data||{};return t.httpCode=e.status,200===t.status?(t.statusText="OK",t):1001===t.status?(console.warn("token\u8fc7\u671f"),t):Promise.reject(t.msg||"\u5931\u8d25")})).catch((function(e){var t=e.response;if(t&&t.status){var n=F[t.status]||t.statusText,a=t.status,o=t.data;console.error("\u8bf7\u6c42\u9519\u8bef ".concat(a,": ").concat(o.path),n)}else t||console.error("\u60a8\u7684\u7f51\u7edc\u53d1\u751f\u5f02\u5e38\uff0c\u65e0\u6cd5\u8fde\u63a5\u670d\u52a1\u5668");throw e}))},G=function(e){return e?"/mockapi":"/api"};var Q={user:{login:"".concat("").concat(G(),"/login"),logout:"".concat("").concat(G(),"/logout"),currentUser:"".concat("").concat(G(),"/user/info")},core:{demo:"".concat("").concat(G(),"/demo/:id")},common:{}},W=(G(),function(){return new Promise((function(e){setTimeout((function(){e({status:200,msg:"success",data:{username:"abc",token:"token_123456",userId:"123abc"}})}),200)}))}),Y={login:function(e){return W()},logout:function(e){return W()},currentUser:function(e){return W()}},Z={demo:function(e,t){return X({url:Q.core.demo,method:"get",params:e,data:t})}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:g,payload:e}};function ee(e,t,n){return function(a){Y.login(e).then((function(e){var n=e.data||{},o=n.token,r=Object(D.a)(n,["token"]),c=Object(s.a)({login:!0,token:o,authority:["user"]},r);a($(c)),B.saveSession(o),"function"===typeof t&&t(e)})).catch((function(e){"function"===typeof n&&n(e)}))}}function te(e,t,n){return function(a){Y.logout(e).then((function(e){a({type:h}),B.clearSession(),"function"===typeof t&&t(e)})).catch((function(e){"function"===typeof n&&n(e)}))}}var ne=function(){return o.a.createElement("div",null,"\u4f60\u6ca1\u6709\u6743\u9650...")};var ae=function(e){var t=e.children,n=e.authority,r=e.needCheckLoginValid,c=void 0===r||r,u=e.noMatch,l=void 0===u?o.a.createElement(ne,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page."}):u,d=Object(i.c)((function(e){return e.user.currentUser})),m=d.authority,p=Object(i.b)(),f=Object(a.useState)(!0),h=Object(x.a)(f,2),g=h[0],b=h[1],v=Object(a.useState)(!1),E=Object(x.a)(v,2),y=E[0],O=E[1],k=Object(U.g)();if(Object(a.useEffect)((function(){var e,t,n;!1!==c&&(B.getToken()?d.login||p((e=null,t=function(e){console.warn("\u81ea\u52a8\u767b\u5f55\u6210\u529f",e)},n=function(e){console.error("Authorized: queryCurrentUser",e),O(!0)},function(a){Y.currentUser(e).then((function(e){var n=e.data||{},o=n.token,r=Object(D.a)(n,["token"]),c=Object(s.a)({login:!0,token:o,authority:["user"]},r);a($(c)),B.saveSession(o),"function"===typeof t&&t(e)})).catch((function(e){"function"===typeof n&&n(e)}))})):b(!1))}),[c,d.login,p]),!g||y)return setTimeout((function(){k.push("/login")}),50),null;var j=function(e,t,n,a){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1;return 0===e.length||(e.forEach((function(e){t.includes(e)&&(n=!0)})),n)}(e,t)?n:a}(n,m,"undefined"===typeof t?null:t,l);return o.a.createElement(o.a.Fragment,null,j)},oe=(n(93),function(e){var t=e.children,n=e.authority;return o.a.createElement("div",{className:"basic-layout"},"basic layout ",JSON.stringify(n),o.a.createElement("div",{className:"main-container"},o.a.createElement(ae,{authority:n},t)))}),re=function(){return{type:d}};var ce=function(e){return function(t){y.save("locale",e),t(function(){return{type:O,payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}({locale:e}))}},ie=n(103),ue=function(){var e=Object(i.c)((function(e){return e.counter})),t=Object(i.c)((function(e){return e.user.currentUser})),n=Object(i.b)(),a=Object(ie.a)();return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"demo"),o.a.createElement("h5",null,"num: ",e.num),o.a.createElement("div",null,o.a.createElement("button",{type:"button",onClick:function(){return n(re())}}," add"),o.a.createElement("button",{type:"button",onClick:function(){return n({type:m})}}," decrease"),o.a.createElement("button",{type:"button",onClick:function(){return n((function(e){setTimeout((function(){e(re())}),2e3)}))}}," async add")),o.a.createElement("h5",null,"user: ",t.username),o.a.createElement("div",null,o.a.createElement("button",{type:"button",onClick:function(){return n(ee())}}," login"),o.a.createElement("button",{type:"button",onClick:function(){return n(te())}}," logout")),o.a.createElement("h5",null,"\u8bf7\u6c42\u6d4b\u8bd5"),o.a.createElement("div",null,o.a.createElement("button",{type:"button",onClick:function(){Y.login().then((function(e){console.log(e)}),(function(e){console.log(e.message)}))}},"\u8bf7\u6c42"),o.a.createElement("button",{type:"button",onClick:function(){Z.demo({id:"123"},{type:"web"}).then((function(e){console.log(e)}),(function(e){console.log(e.message)}))}},"\u62fc\u63a5\u53c2\u6570")),o.a.createElement("h5",null,"\u56fd\u9645\u5316"),o.a.createElement("div",null,o.a.createElement("p",null,a.formatMessage({id:"navBar.lang"})),o.a.createElement("p",null,a.formatDate(new Date))),o.a.createElement("div",null,o.a.createElement("button",{type:"button",onClick:function(){n(ce("zh-CN"))}},"\u4e2d\u6587"),o.a.createElement("button",{type:"button",onClick:function(){n(ce("en-US"))}},"\u82f1\u6587")))},le=function(e){var t=e.authority;return o.a.createElement("div",{className:"page-dashboard"},o.a.createElement("h1",null,"Dashboard Page ",JSON.stringify(t)),o.a.createElement("div",{className:"page-body"},o.a.createElement(ae,{authority:t,needCheckLoginValid:!1},o.a.createElement(ue,null))))},se=function(){var e=Object(i.c)((function(e){return e.user.currentUser})),t=Object(i.b)(),n=Object(U.g)(),r=Object(a.useState)(""),c=Object(x.a)(r,2),u=c[0],l=c[1],s=Object(a.useState)(""),d=Object(x.a)(s,2),m=d[0],p=d[1];return o.a.createElement("div",{className:"page-dashboard"},o.a.createElement("h1",null,"Login Page"),o.a.createElement("div",{className:"page-body"},o.a.createElement("div",null,JSON.stringify(e)),o.a.createElement("form",{action:"demo-form.php"},"name: ",o.a.createElement("input",{type:"text",value:u,onChange:function(e){return l(e.target.value)}}),o.a.createElement("br",null),"password: ",o.a.createElement("input",{type:"text",value:m,onChange:function(e){return p(e.target.value)}}),o.a.createElement("br",null),o.a.createElement("button",{type:"button",onClick:function(){t(ee({name:u,password:m},(function(e){console.log("\u767b\u5f55\u6210\u529f",e),n.push("/dashboard")})))}},"\u767b\u5f55"))))},de=(n(95),[{path:"/",exact:!0,redirect:"/question"},{path:"/login",component:se,exact:!0},{path:"/question",component:function(){return o.a.createElement("div",{className:"page-question"},o.a.createElement("div",{className:"page-body"},o.a.createElement("div",{className:"question-section"},o.a.createElement("div",{className:"title"},"\u8bf7\u95ee\u5c0f\u670b\u53cb"),o.a.createElement("div",{className:"question-body"},o.a.createElement("div",{className:"option-item"},o.a.createElement("div",{className:"result"})),o.a.createElement("div",{className:"option-item"},o.a.createElement("img",{src:"/assets/question/topic_1/\u52fa.png"})),o.a.createElement("div",{className:"option-item"})))))},exact:!0},{path:"/",component:oe,authority:[],routes:[{path:"/dashboard",name:"dashboard",exact:!0,authority:["admin","user"],component:le}]}]),me=function e(t){return t.render?o.a.createElement(U.b,{key:t.path,path:t.path,exact:t.exact,render:t.render}):o.a.createElement(U.b,{key:t.path,path:t.path,exact:t.exact,render:function(){var n=o.a.createElement(U.d,null,t.routes&&t.routes.map((function(t){return o.a.createElement(e,Object(q.a)({key:t.path},t))})));return t.redirect?o.a.createElement(U.a,{to:t.redirect}):t.component?o.a.createElement(t.component,{authority:t.authority||[]},n):n}})};var pe=function(){return o.a.createElement(R.a,null,o.a.createElement(U.d,null,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return me(e)}))}(de)))},fe=(n(97),function(){return o.a.createElement(C,null,o.a.createElement("div",{className:"app"},o.a.createElement(pe,null)))}),he=(n(99),Object(u.e)(w,_));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(i.a,{store:he},o.a.createElement(fe,null))),document.getElementById("root"))},93:function(e,t,n){var a=n(37),o=n(94);"string"===typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},94:function(e,t,n){"use strict";n.r(t);var a=n(23),o=n.n(a)()(!1);o.push([e.i,".basic-layout {\n  position: relative;\n  height: 100%;\n  padding: 10px;\n  box-sizing: border-box;\n  font-size: 16px;\n}\n.basic-layout .main-container {\n  width: 100%;\n  min-height: 100%;\n  padding-bottom: 100px;\n  box-sizing: border-box;\n}\n",""]),t.default=o},95:function(e,t,n){var a=n(37),o=n(96);"string"===typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},96:function(e,t,n){"use strict";n.r(t);var a=n(23),o=n.n(a)()(!1);o.push([e.i,".page-question {\n  width: 100%;\n  height: 100%;\n}\n.page-question .page-body {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.page-question .page-body .question-section .title {\n  height: 50px;\n  line-height: 50px;\n}\n.page-question .page-body .question-section .question-body {\n  display: flex;\n  flex-direction: row;\n}\n.page-question .page-body .question-section .question-body .option-item {\n  width: 8rem;\n  height: 8rem;\n  border: 1px solid #ccc;\n  border-radius: 1rem;\n  margin-right: 20px;\n  position: relative;\n}\n.page-question .page-body .question-section .question-body .option-item img {\n  width: 100%;\n  height: 100%;\n}\n.page-question .page-body .question-section .question-body .option-item .result {\n  position: absolute;\n  bottom: -50px;\n  left: 50%;\n  transform: translate(-50%, 0);\n  width: 30px;\n  height: 30px;\n  border: 1px solid red;\n}\n.page-question .page-body .question-section .question-body .option-item:last-of-type {\n  margin-right: 0px;\n}\n",""]),t.default=o},97:function(e,t,n){var a=n(37),o=n(98);"string"===typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},98:function(e,t,n){"use strict";n.r(t);var a=n(23),o=n.n(a)()(!1);o.push([e.i,".app {\n  width: 100%;\n  height: 100%;\n}\n/* .App {\n  text-align: center;\n}\n\n.App-logo {\n  height: 40vmin;\n  pointer-events: none;\n}\n\n@media (prefers-reduced-motion: no-preference) {\n  .App-logo {\n    animation: App-logo-spin infinite 20s linear;\n  }\n} */\n/* .App-header {\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(10px + 2vmin);\n  color: white;\n} */\n/* .App-link {\n  color: #61dafb;\n}\n\n@keyframes App-logo-spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n} */\n",""]),t.default=o},99:function(e,t,n){}},[[100,1,2]]]);